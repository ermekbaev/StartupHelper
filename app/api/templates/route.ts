import { NextRequest, NextResponse } from 'next/server';

// Шаблоны документов
const TEMPLATES: Record<number, { title: string; fileName: string; content: string }> = {
  1: {
    title: 'Бизнес-план',
    fileName: 'business-plan.txt',
    content: `БИЗНЕС-ПЛАН СТАРТАП-ПРОЕКТА
=====================================

1. РЕЗЮМЕ ПРОЕКТА
-----------------
Название проекта: [Название вашего проекта]
Дата создания: [Дата]
Автор: [ФИО]

Краткое описание:
[Опишите суть вашего проекта в 2-3 предложениях]

2. ОПИСАНИЕ ПРОДУКТА/УСЛУГИ
---------------------------
[Подробное описание того, что вы предлагаете]

3. АНАЛИЗ РЫНКА
---------------
Целевая аудитория:
- [Сегмент 1]
- [Сегмент 2]

Конкуренты:
- [Конкурент 1]
- [Конкурент 2]

4. МАРКЕТИНГОВАЯ СТРАТЕГИЯ
--------------------------
[Опишите каналы продвижения]

5. ФИНАНСОВЫЙ ПЛАН
------------------
Стартовые инвестиции: _____ руб.
Прогнозируемая выручка (1 год): _____ руб.
Точка безубыточности: _____ месяцев

6. КОМАНДА ПРОЕКТА
------------------
[Перечислите ключевых участников]

7. РИСКИ И СПОСОБЫ ИХ МИНИМИЗАЦИИ
---------------------------------
[Опишите основные риски]

---
Шаблон подготовлен StartupHelper
`,
  },
  2: {
    title: 'Развитие стартап-проекта',
    fileName: 'startup-development.txt',
    content: `ПЛАН РАЗВИТИЯ СТАРТАП-ПРОЕКТА
=====================================

ЭТАП 1: ПОДГОТОВКА (1-2 месяц)
------------------------------
[ ] Регистрация юридического лица
[ ] Открытие расчетного счета
[ ] Настройка бухгалтерского учета
[ ] Оформление необходимых лицензий

ЭТАП 2: ЗАПУСК (2-4 месяц)
--------------------------
[ ] Разработка MVP продукта
[ ] Тестирование на первых пользователях
[ ] Сбор обратной связи
[ ] Итерации по улучшению

ЭТАП 3: МАСШТАБИРОВАНИЕ (4-6 месяц)
-----------------------------------
[ ] Запуск маркетинговых кампаний
[ ] Расширение команды
[ ] Оптимизация процессов
[ ] Привлечение инвестиций

КЛЮЧЕВЫЕ МЕТРИКИ:
-----------------
- Количество пользователей: _____
- Выручка: _____ руб.
- Конверсия: _____%
- Retention: _____%

---
Шаблон подготовлен StartupHelper
`,
  },
  3: {
    title: 'Отчет по 1 этапу',
    fileName: 'report-stage-1.txt',
    content: `ОТЧЕТ О ВЫПОЛНЕНИИ 1 ЭТАПА ПРОЕКТА
=====================================

Название проекта: [Название]
Период: с ___ по ___
Грантополучатель: [ФИО]

1. ВЫПОЛНЕННЫЕ РАБОТЫ
---------------------
1.1. [Описание работы 1]
    Результат: ____________

1.2. [Описание работы 2]
    Результат: ____________

2. ДОСТИГНУТЫЕ РЕЗУЛЬТАТЫ
-------------------------
- [Результат 1]
- [Результат 2]

3. ФИНАНСОВЫЙ ОТЧЕТ
-------------------
Получено средств: __________ руб.
Израсходовано: __________ руб.

Статьи расходов:
- Заработная плата: __________ руб.
- Налоги: __________ руб.
- Оборудование: __________ руб.
- Услуги: __________ руб.
- Прочее: __________ руб.

4. ПРИЛОЖЕНИЯ
-------------
[ ] Копии договоров
[ ] Акты выполненных работ
[ ] Платежные документы

Дата: _______________
Подпись: ____________

---
Шаблон подготовлен StartupHelper
`,
  },
  4: {
    title: 'Отчет по 2 этапу',
    fileName: 'report-stage-2.txt',
    content: `ОТЧЕТ О ВЫПОЛНЕНИИ 2 ЭТАПА ПРОЕКТА
=====================================

Название проекта: [Название]
Период: с ___ по ___
Грантополучатель: [ФИО]

1. ВЫПОЛНЕННЫЕ РАБОТЫ
---------------------
[Аналогично 1 этапу]

2. ИТОГОВЫЕ РЕЗУЛЬТАТЫ ПРОЕКТА
------------------------------
- [Итоговый результат 1]
- [Итоговый результат 2]

3. ФИНАНСОВЫЙ ОТЧЕТ
-------------------
[Аналогично 1 этапу]

4. ПЕРСПЕКТИВЫ РАЗВИТИЯ
-----------------------
[Опишите дальнейшие планы]

---
Шаблон подготовлен StartupHelper
`,
  },
  5: {
    title: 'Воинский учет организации',
    fileName: 'military-registration.txt',
    content: `ДОКУМЕНТЫ ПО ВОИНСКОМУ УЧЕТУ
=====================================

ОБЯЗАТЕЛЬНЫЕ ДОКУМЕНТЫ:
-----------------------
1. Приказ об организации воинского учета
2. План работы по ведению воинского учета
3. Журнал проверок состояния воинского учета
4. Карточка учета организации (форма 18)

ДЕЙСТВИЯ ПРИ ПРИЕМЕ СОТРУДНИКА:
-------------------------------
[ ] Проверить документы воинского учета
[ ] Заполнить раздел II личной карточки Т-2
[ ] Направить сведения в военкомат (2 недели)

ЕЖЕГОДНЫЕ МЕРОПРИЯТИЯ:
----------------------
[ ] Сверка данных с военкоматом (до 1 ноября)
[ ] Обновление карточки формы 18

---
Шаблон подготовлен StartupHelper
`,
  },
  6: {
    title: 'Трудовой договор',
    fileName: 'employment-contract.txt',
    content: `ТРУДОВОЙ ДОГОВОР № ___

г. ____________                                    "___" __________ 20__ г.

_____________________________, именуемое в дальнейшем "Работодатель",
в лице _____________________________, действующего на основании __________,
с одной стороны, и гражданин(ка) _____________________________,
именуемый(ая) в дальнейшем "Работник", с другой стороны,
заключили настоящий договор о нижеследующем:

1. ПРЕДМЕТ ДОГОВОРА
-------------------
1.1. Работник принимается на работу в должности: _______________
1.2. Место работы: _______________
1.3. Дата начала работы: _______________

2. СРОК ДОГОВОРА
----------------
2.1. Договор заключен на неопределенный срок / на срок до _______________

3. ОПЛАТА ТРУДА
---------------
3.1. Должностной оклад: _______________ рублей в месяц
3.2. Выплата заработной платы: ___ и ___ числа каждого месяца

4. РЕЖИМ РАБОТЫ
---------------
4.1. Рабочее время: с ___ до ___ часов
4.2. Выходные дни: суббота, воскресенье

5. ПРАВА И ОБЯЗАННОСТИ СТОРОН
-----------------------------
[Стандартные положения по ТК РФ]

ПОДПИСИ СТОРОН:

Работодатель:                              Работник:
_______________                            _______________

---
Шаблон подготовлен StartupHelper
`,
  },
  7: {
    title: 'Приказ о приеме',
    fileName: 'hiring-order.txt',
    content: `                                    ПРИКАЗ № ___
                              о приеме работника на работу

г. ____________                                    "___" __________ 20__ г.

ПРИНЯТЬ НА РАБОТУ:

Фамилия, имя, отчество: _____________________________
Табельный номер: _______________
Структурное подразделение: _______________
Должность: _______________
Условия приема: основная работа / совместительство
Характер работы: постоянно / временно
Оклад: _______________ руб.
Надбавка: _______________ руб.

Испытательный срок: ___ месяца(ев)

Основание: трудовой договор № ___ от _______________

Руководитель организации: _______________  /_______________/

С приказом ознакомлен(а): _______________  /_______________/
                          "___" __________ 20__ г.

---
Шаблон подготовлен StartupHelper
`,
  },
  8: {
    title: 'Договор услуг',
    fileName: 'service-contract.txt',
    content: `ДОГОВОР ВОЗМЕЗДНОГО ОКАЗАНИЯ УСЛУГ № ___

г. ____________                                    "___" __________ 20__ г.

_____________________________, именуемое в дальнейшем "Заказчик",
в лице _____________________________, действующего на основании __________,
с одной стороны, и _____________________________,
именуемое в дальнейшем "Исполнитель", с другой стороны,
заключили настоящий договор о нижеследующем:

1. ПРЕДМЕТ ДОГОВОРА
-------------------
1.1. Исполнитель обязуется оказать следующие услуги:
     _______________________________________________
1.2. Заказчик обязуется принять и оплатить услуги.

2. СТОИМОСТЬ УСЛУГ И ПОРЯДОК РАСЧЕТОВ
-------------------------------------
2.1. Стоимость услуг составляет: _______________ рублей
2.2. Оплата производится в течение ___ дней с момента подписания акта

3. СРОКИ ОКАЗАНИЯ УСЛУГ
-----------------------
3.1. Начало: _______________
3.2. Окончание: _______________

4. ОТВЕТСТВЕННОСТЬ СТОРОН
-------------------------
[Стандартные положения]

РЕКВИЗИТЫ И ПОДПИСИ СТОРОН:

Заказчик:                                  Исполнитель:
_______________                            _______________

---
Шаблон подготовлен StartupHelper
`,
  },
  9: {
    title: 'Акт выполненных работ',
    fileName: 'completion-act.txt',
    content: `                              АКТ № ___
                    сдачи-приемки выполненных работ (оказанных услуг)

                    к договору № ___ от _______________

г. ____________                                    "___" __________ 20__ г.

Исполнитель: _____________________________
Заказчик: _____________________________

Исполнитель выполнил, а Заказчик принял следующие работы (услуги):

┌────┬──────────────────────────────┬─────────┬───────────┬───────────┐
│ №  │ Наименование работ (услуг)   │ Ед.изм. │ Кол-во    │ Сумма     │
├────┼──────────────────────────────┼─────────┼───────────┼───────────┤
│ 1  │                              │         │           │           │
├────┼──────────────────────────────┼─────────┼───────────┼───────────┤
│ 2  │                              │         │           │           │
├────┴──────────────────────────────┴─────────┴───────────┼───────────┤
│ ИТОГО:                                                  │           │
└─────────────────────────────────────────────────────────┴───────────┘

Общая стоимость работ (услуг): _______________ (_____________________) рублей.
НДС: не облагается / в том числе НДС _______________ рублей.

Работы выполнены в полном объеме и в срок. Заказчик претензий не имеет.

Исполнитель:                               Заказчик:
_______________                            _______________

---
Шаблон подготовлен StartupHelper
`,
  },
  10: {
    title: 'Счет на оплату',
    fileName: 'invoice.txt',
    content: `                              СЧЕТ НА ОПЛАТУ № ___
                              от "___" __________ 20__ г.

ПОСТАВЩИК: _____________________________
ИНН/КПП: _______________
Адрес: _____________________________
Р/с: _____________________________
Банк: _____________________________
БИК: _______________
К/с: _____________________________

ПОКУПАТЕЛЬ: _____________________________
ИНН/КПП: _______________
Адрес: _____________________________

┌────┬──────────────────────────────┬─────────┬───────────┬───────────┐
│ №  │ Наименование товара/услуги   │ Ед.изм. │ Кол-во    │ Сумма     │
├────┼──────────────────────────────┼─────────┼───────────┼───────────┤
│ 1  │                              │         │           │           │
├────┼──────────────────────────────┼─────────┼───────────┼───────────┤
│ 2  │                              │         │           │           │
├────┴──────────────────────────────┴─────────┴───────────┼───────────┤
│ ИТОГО:                                                  │           │
├─────────────────────────────────────────────────────────┼───────────┤
│ В том числе НДС:                                        │           │
├─────────────────────────────────────────────────────────┼───────────┤
│ ВСЕГО К ОПЛАТЕ:                                         │           │
└─────────────────────────────────────────────────────────┴───────────┘

Всего к оплате: _______________ (_____________________) рублей.

Руководитель: _______________          Бухгалтер: _______________

---
Шаблон подготовлен StartupHelper
`,
  },
  11: {
    title: 'УПД',
    fileName: 'upd.txt',
    content: `           УНИВЕРСАЛЬНЫЙ ПЕРЕДАТОЧНЫЙ ДОКУМЕНТ (УПД)

Статус: 1 - счет-фактура и передаточный документ

СЧЕТ-ФАКТУРА № ___ от "___" __________ 20__ г.

Продавец: _____________________________
Адрес: _____________________________
ИНН/КПП: _______________

Покупатель: _____________________________
Адрес: _____________________________
ИНН/КПП: _______________

┌────┬─────────────────┬────────┬────────┬────────┬────────┬────────┐
│ №  │ Наименование    │ Ед.    │ Кол-во │ Цена   │ Сумма  │ НДС    │
├────┼─────────────────┼────────┼────────┼────────┼────────┼────────┤
│    │                 │        │        │        │        │        │
└────┴─────────────────┴────────┴────────┴────────┴────────┴────────┘

Основание передачи: Договор № ___ от _______________
Данные о транспортировке: _______________

Товар (работы, услуги) передал:              Товар (работы, услуги) получил:
Должность: _______________                   Должность: _______________
Подпись: _______________                     Подпись: _______________
Дата: _______________                        Дата: _______________

---
Шаблон подготовлен StartupHelper
`,
  },
  12: {
    title: 'Налоговая декларация',
    fileName: 'tax-declaration.txt',
    content: `ИНФОРМАЦИЯ О НАЛОГОВЫХ ДЕКЛАРАЦИЯХ
=====================================

ДЛЯ УСН (УПРОЩЕННАЯ СИСТЕМА НАЛОГООБЛОЖЕНИЯ):
---------------------------------------------
Срок сдачи: до 25 числа месяца, следующего за отчетным кварталом
Форма: Налоговая декларация по УСН (КНД 1152017)

Авансовые платежи:
- За 1 квартал: до 25 апреля
- За полугодие: до 25 июля
- За 9 месяцев: до 25 октября
- За год: до 25 апреля следующего года (для ИП - до 30 апреля)

ДЛЯ ОБЩЕЙ СИСТЕМЫ НАЛОГООБЛОЖЕНИЯ:
----------------------------------
НДС: ежеквартально до 25 числа
Налог на прибыль: ежеквартально до 28 числа
6-НДФЛ: ежеквартально

СТРАХОВЫЕ ВЗНОСЫ:
-----------------
Расчет по страховым взносам: ежеквартально до 25 числа
СЗВ-М: ежемесячно до 15 числа
СЗВ-ТД: при наличии кадровых событий

ВАЖНО:
------
- Ведите книгу учета доходов и расходов
- Сохраняйте все первичные документы
- Используйте онлайн-сервисы для сдачи отчетности

---
Шаблон подготовлен StartupHelper
`,
  },
};

// GET - скачать шаблон
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const id = searchParams.get('id');

    if (!id) {
      // Вернуть список доступных шаблонов
      const templates = Object.entries(TEMPLATES).map(([key, value]) => ({
        id: parseInt(key),
        title: value.title,
        fileName: value.fileName,
      }));
      return NextResponse.json({ templates });
    }

    const templateId = parseInt(id);
    const template = TEMPLATES[templateId];

    if (!template) {
      return NextResponse.json({ error: 'Template not found' }, { status: 404 });
    }

    return NextResponse.json({
      template: {
        id: templateId,
        title: template.title,
        fileName: template.fileName,
        content: template.content,
      },
    });
  } catch (error) {
    console.error('Get template error:', error);
    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });
  }
}
